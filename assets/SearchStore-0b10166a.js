import{_ as $,r as h,i as F,l as K,a as o,o as r,c as i,b as e,w as t,W as L,e as U,f as S,k as b,m as w,F as j,j as z,h as c,t as f,p as E,g as M}from"./index-f324644a.js";import{a as C}from"./store-99434806.js";const R=p=>(E("data-v-97de0405"),p=p(),M(),p),T=R(()=>c("h1",{class:"mb-3"},"搜尋",-1)),A={key:0},G={class:"d-flex align-center"},H={class:"rounded block me-3"},J={class:"mb-1"},O={class:"text-grey mb-1"},P={class:"text-grey mb-1"},Q={key:1},X={key:0,class:"text-center"},Y={__name:"SearchStore",setup(p){const l=h(""),u=h(!1),d=h([]),_=h(0),m=async(n,s)=>{const g=await C({q:n});_.value=g.data;const v=await C({q:n,_page:s});d.value=v.data,u.value=!0},V=n=>{u.value===!0&&m(l.value,n)};F(async()=>{const n=K();n.query.keyword?(l.value=n.query.keyword,m(l.value,1),u.value=!0):d.value=[]});const N=()=>{l.value="",u.value=!1,d.value=[],_.value=0};return(n,s)=>{const g=o("el-input"),v=o("el-form-item"),y=o("el-button"),q=o("el-form"),k=o("el-card"),x=o("el-col"),B=o("el-image"),I=o("el-row"),D=o("router-link"),W=o("el-pagination");return r(),i("div",null,[e(L,null,{default:t(()=>[e(k,{class:"search-card mb-3"},{default:t(()=>[T,e(q,{inline:!0,size:"large",style:{"margin-bottom":"-24px"}},{default:t(()=>[e(v,{style:{width:"100%","max-width":"400px"}},{default:t(()=>[e(g,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=a=>l.value=a),type:"round",placeholder:"搜尋換宿店家",onKeyup:s[1]||(s[1]=U(a=>m(l.value),["enter"]))},null,8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(y,{type:"primary",onClick:s[2]||(s[2]=a=>m(l.value)),tabindex:"0"},{default:t(()=>[S("搜尋")]),_:1}),u.value?(r(),b(y,{key:0,type:"secondary",onClick:N},{default:t(()=>[S("重置")]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),d.value.length>0?(r(),i("div",A,[(r(!0),i(j,null,z(d.value,a=>(r(),b(D,{to:`/storeDetail/${a.id}`,key:a.id,class:"router-link"},{default:t(()=>[e(k,{class:"mb-3"},{default:t(()=>[e(I,{gutter:"16",class:"align-center"},{default:t(()=>[e(x,{xs:0,md:1}),e(x,{xs:24,md:18},{default:t(()=>[c("div",G,[c("div",H,[e(B,{style:{width:"100px",height:"100px"},src:a.imgUrl,fit:"cover",class:"rounded"},null,8,["src"])]),c("div",null,[c("h4",J,f(a.name),1),c("p",O,f(a.address),1),c("p",P,f(a.tel),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))])):(r(),i("div",Q,[u.value?(r(),i("div",X,"查無相關結果")):w("",!0)])),e(W,{background:"",layout:"prev, pager, next",total:_.value.length,onCurrentChange:V,"hide-on-single-page":_.value.length===10||_.value.length<10},null,8,["total","hide-on-single-page"])]),_:1})])}}},te=$(Y,[["__scopeId","data-v-97de0405"]]);export{te as default};
